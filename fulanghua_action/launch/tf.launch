<?xml version="1.0"?>
<launch>
<arg name="world_frame"       default="map"/>
<arg name="robot_name"       default="limo"/>
<arg name="lang"              default="eng"/>
<arg name="waypoints_file" default="$(find orne_waypoints_editor)/waypoints_cfg/waypoints.yaml"/>
<arg name="amcl_filename" default="$(find fulanghua_waypoints_nav)/param/initial_pose.yaml"/>
<arg name="voice_path" default="$(find fulanghua_waypoints_nav)/voice/$(arg lang)/"/>
<arg name="dist_err"       default="0.8"/>
<arg name="cmd_vel"         default="cmd_vel"/>
<arg name="max_vel"         default="0.4"/>
<arg name="min_vel"         default="0.1"/>
<arg name="volume"         default="2.0"/>
<arg name="Kp"       default="3.0"/> 
<arg name="Kv"       default="0.0"/> 
<arg name="offset_fixed_x" default="0.009"/>
<arg name="offset_fixed_y" default="0.0345"/>
<arg name="offset_fixed_z" default="0.32"/>
<arg name="adjust_speed" default="0.2"/>
<arg name="image_topic" default="/usb_cam/image_raw"/>
<arg name="calibration_path" default="$(find camera_pkg)/param"/> 

<node pkg="uvc_camera" type="uvc_camera_node" name="uvc_camera" output="screen">
	<param name="width" type="int" value="640" />
	<param name="height" type="int" value="480" />
	<param name="fps" type="int" value="30" />
	<param name="frame" type="string" value="wide_stereo" />

	<param name="auto_focus" type="bool" value="False" />
	<param name="focus_absolute" type="int" value="0" />
	<!-- other supported params: auto_exposure, exposure_absolute, brightness, power_line_frequency -->

	<param name="device" type="string" value="/dev/video0" />
	<param name="camera_info_url" type="string" value="file://$(arg calibration_path)/camera.yaml" />
<remap from="/image_raw" to="/usb_cam/image_raw" />
</node>


<node name="ar_detect_server" pkg="fulanghua_action" type="aruco_detect_server" output="screen">
    <param name="cmd_vel"  value="$(arg cmd_vel)" />
    <param name="image_topic" value="$(arg image_topic)"/>
    <param name="Kp"  value="$(arg Kp)" />
	<param name="Kv"  value="$(arg Kv)" />
	<param name="adjust_speed"  value="$(arg adjust_speed)" />
    <param name="offset_fixed_x" value="$(arg offset_fixed_x)"/>
    <param name="offset_fixed_y" value="$(arg offset_fixed_y)"/>
    <param name="offset_fixed_z" value="$(arg offset_fixed_z)"/>
	<param name="calibration_path" value="$(arg calibration_path)/camera_ext.yaml" />
</node>

</launch>
